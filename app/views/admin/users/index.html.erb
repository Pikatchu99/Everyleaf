<div class="mt-5"></div>
<div>
<a href="<%=new_admin_user_path %>" class="btn btn-outline-success">New User</a>
</div>
<h1 class="mt-3">Users</h1>
<table class="table mt-5">
  <thead class="table-primary">
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Email</th>
      <th scope="col">Nbre Tasks</th>
      <th scope="col">Status</th>
      <th scope="col"></th>
      <th scope="col"></th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td class="user_row"><%= user.name %></td>
        <td><%= user.email %></td>

        <td><%= user.tasks.count %></td>
        
        <% if user.is_admin %>
            <td>Administrateur</td>
        <% else %>
            <td>Utilisateur simple</td>
        <% end %>

        <!-- Show -->
          <td><span <% if current_user.id == user.id %>class="d-none" <% end %>><%= link_to 'Show', admin_user_path(user.id), :class => "btn btn-outline-primary user_row" %></span></td>
        <!-- Edit -->
          <td><span <% if current_user.id == user.id %>class="d-none" <% end %>><%= link_to 'Edit', edit_admin_user_path(user.id), :class => "btn btn-outline-success" %></span></td>
        <!-- Destroy -->
          <% if user.is_admin %>
          <td><span <% if current_user.id == user.id %>class="d-none" <% end %>><%= link_to 'Destroy', admin_user_path(user.id), method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn btn-outline-danger" %></span></td>
        <% else %>
          <td><%= link_to 'Destroy', user_path(user.id), method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn btn-outline-info" %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @users %>